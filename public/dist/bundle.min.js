!function(){"use strict";angular.module("app",["ngRoute","toaster","angular-loading-bar","ngAnimate"])}(),function(){"use strict";function e(e){e.when("/",{templateUrl:"components/home/index.html"}).when("/about",{templateUrl:"components/home/about.html"}).otherwise({redirectTo:"/"})}angular.module("app").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(){function e(){var e=this;e.user={},e.repos=[],e.setUser=function(t){e.user=t},e.clearUser=function(){e.user=null},e.setRepos=function(t){e.repos=t},e.clearRepos=function(){e.repos=null}}return{restrict:"E",templateUrl:"components/github/github.html",scope:{},controller:e,controllerAs:"vm",bindToController:{user:"=",repos:"="}}}angular.module("app").directive("github",e)}(),function(){"use strict";function e(e,t){function n(n,r,o,s){function i(n){e.getByUsername(n).then(function(e){c(n),s.setUser(e.data)})["catch"](function(){t.pop("error","Server Error","Unable to fetch user's data"),s.clearUser()})}function c(n){e.getReposByUsername(n).then(function(e){s.setRepos(e.data)})["catch"](function(){t.pop("error","Server Error","Unable to fetch user's repos"),s.clearRepos()})}n.$watch("username",function(e){e?i(e):s.clearUser()})}return{restrict:"E",templateUrl:"components/github/search-user.html",require:"^github",scope:{},link:n}}angular.module("app").directive("searchUser",e),e.$inject=["UsersService","toaster"]}(),function(){"use strict";function e(e){function t(t,n,r){t.$watch("repos",function(t){t&&e.animate("#user-info")})}return{restrict:"E",templateUrl:"components/github/user-info.html",scope:{user:"=",repos:"="},link:t}}angular.module("app").directive("userInfo",e),e.$inject=["SmoothScroll"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"components/github/user-repos.html",scope:{repos:"="}}}angular.module("app").directive("userRepos",e)}(),function(){"use strict";function e(e,t){this.getByUsername=function(n){return e.get(t.baseUrl+"users/"+n)},this.getReposByUsername=function(n){return e.get(t.baseUrl+"users/"+n+"/repos")}}angular.module("app").service("UsersService",e),e.$inject=["$http","API"]}(),function(){"use strict";angular.module("app").constant("API",{baseUrl:"https://api.github.com/"})}(),function(){"use strict";function e(e){function t(t,n,r){e(function(){n[0].focus()})}return{restrict:"A",link:t}}angular.module("app").directive("autofocus",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e){function t(t){e(function(){var e=$(t);if(e&&e.offset()){e.offset().top;$("html,body").animate({scrollTop:e.offset().top},"slow")}},300)}return{animate:t}}angular.module("app").factory("SmoothScroll",e),e.$inject=["$timeout"]}(),describe("github directive",function(){var e,t,n,r;beforeEach(module("app","templates")),beforeEach(inject(function(o,s){e=o.$new(),t="<github></github>",t=s(t)(e),e.$digest(),n=t.controller("github"),r=t.isolateScope()})),describe("setUser",function(){beforeEach(function(){n.setUser({user:{name:"name"}})}),it("updates the user",function(){expect(r.user).toEqual({user:{name:"name"}})})}),describe("clearUser",function(){beforeEach(function(){n.clearUser()}),it("updates the user",function(){expect(r.user).toBe(null)})}),describe("setRepos",function(){beforeEach(function(){n.setRepos({repos:[1,2,3]})}),it("updates repos",function(){expect(r.repos).toEqual({repos:[1,2,3]})})}),describe("clearRepos",function(){beforeEach(function(){n.clearRepos()}),it("updates repos",function(){expect(r.repos).toBe(null)})})}),describe("search-user directive",function(){var e,t,n,r,o,s,i,c;beforeEach(module("app","templates")),beforeEach(inject(function(u,a,l,p,f){r=l.defer(),o=l.defer(),e=u.$new(),i=p,c=f,spyOn(f,"pop").and.callThrough(),spyOn(i,"getByUsername").and.callFake(function(){return r.promise}),spyOn(i,"getReposByUsername").and.callFake(function(){return o.promise}),s={setUser:function(){},clearUser:function(){},setRepos:function(){},clearRepos:function(){}},spyOn(s,"setUser").and.callThrough(),spyOn(s,"clearUser").and.callThrough(),spyOn(s,"setRepos").and.callThrough(),spyOn(s,"clearRepos").and.callThrough(),n=angular.element("<search-user></search-user>"),n.data("$githubController",s),n=a(n)(e),e.$digest(),t=n.isolateScope()})),describe("linker",function(){describe("when username is undefined",function(){it("invokes githubCtrl clearUser",function(){expect(s.clearUser).toHaveBeenCalledWith()})}),describe("when username is defined",function(){beforeEach(function(){t.username="username",t.$apply()}),it("invokes UsersService getByUsername",function(){expect(i.getByUsername).toHaveBeenCalledWith("username")}),describe("when the promise is rejected",function(){beforeEach(function(){r.reject(),t.$apply()}),it("invokes toaster pop",function(){expect(c.pop).toHaveBeenCalledWith("error","Server Error","Unable to fetch user's data")}),it("invokes githubCtrl clearUser",function(){expect(s.clearUser).toHaveBeenCalledWith()})}),describe("when the promise is solved",function(){beforeEach(function(){r.resolve({data:{user:{}}}),t.$apply()}),it("invokes githubCtrl setUser",function(){expect(s.setUser).toHaveBeenCalledWith({user:{}})}),it("invokes UsersService getReposByUsername",function(){expect(i.getReposByUsername).toHaveBeenCalledWith("username")}),describe("when the promise is rejected",function(){beforeEach(function(){o.reject(),t.$apply()}),it("invokes toaster pop",function(){expect(c.pop).toHaveBeenCalledWith("error","Server Error","Unable to fetch user's repos")}),it("invokes githubCtrl clearRepos",function(){expect(s.clearRepos).toHaveBeenCalledWith()})}),describe("when the promise is solved",function(){beforeEach(function(){o.resolve({data:{repos:[]}}),t.$apply()}),it("invokes githubCtrl setRepos",function(){expect(s.setRepos).toHaveBeenCalledWith({repos:[]})})})})})})}),describe("user-info directive",function(){var e,t,n,r;beforeEach(module("app","templates")),beforeEach(inject(function(o,s,i){e=o.$new(),r=i,spyOn(r,"animate").and.callThrough(),t='<user-info user="user" repos="repos"></user-info>',t=s(t)(e),e.$digest(),n=t.isolateScope()})),describe("linker",function(){describe("when repos is undefined",function(){it("doesnt invoke smooth scroll",function(){expect(r.animate).not.toHaveBeenCalled()})}),describe("when repos is defined",function(){it("invokes smooth scroll",function(){e.repos=[1,2,3],e.$apply(),expect(r.animate).toHaveBeenCalledWith("#user-info")})})})});